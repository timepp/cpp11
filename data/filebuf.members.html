<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script type="text/javascript" src="../sh_main.js"></script>
<script type="text/javascript" src="../sh_cpp.js"></script>
<!--[IF IE]>
	<script type="text/javascript" src="ierange.js"></script>
<![ENDIF]-->
<script type="text/javascript" src="../masha.min.js"></script>
<script type="text/javascript" src="../all_pack.js"></script>
<link rel="stylesheet" type="text/css" href="../css/masha.css">
<link rel="stylesheet" type="text/css" href="../sh_print.css">
<link rel="stylesheet" type="text/css" href="../toc.css">
<link rel="stylesheet" type="text/css" href="../styles.css">
<script type="text/javascript" src="../page.js"></script>

<title>Member functions</title>
</head>
<body>
<h4>
<dfn class="label">[filebuf.members]</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="[filebuf.members]"></object>27.9.1.4 Member functions </h4>

<h5><code class="sh_cpp">bool <dfn>is_open</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="is_open"></object>() const;</code></h5>

<p><a class="anchor" id="p1" href="#p1">1</a><em>Returns:</em> <code class="sh_cpp">true</code> if a previous call to <code class="sh_cpp">open</code> succeeded (returned a non-null value) and
there has been no intervening call to <code class="sh_cpp">close</code>.</p>

<h5><code class="sh_cpp">basic_filebuf&lt;charT, traits&gt;* <dfn>open</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="open"></object>(const char* s,
    ios_base::openmode mode);</code></h5>

<p><a class="anchor" id="p2" href="#p2">2</a><em>Effects:</em> If <code class="sh_cpp">is_open() != false</code>, returns a null pointer. Otherwise, initializes the
<code class="sh_cpp">filebuf</code> as required. It then opens a file, if possible, whose name is the <acronym>ntbs</acronym>
<code class="sh_cpp">s</code> (as if by calling <code class="sh_cpp">std::fopen(s,modstr)</code>). The <acronym>ntbs</acronym> <code class="sh_cpp">modstr</code> is
determined from <code class="sh_cpp">mode &amp; ~ios_base::ate</code> as indicated in Table <a href="filebuf.members.html#t132">132</a>. If <code class="sh_cpp">mode</code> is not
some combination of flags shown in the table then the open fails.</p>

<p><a class="anchor" id="p3" href="#p3">3</a>If the <code class="sh_cpp">open</code> operation succeeds and <code class="sh_cpp">(mode &amp; ios_base::ate) != 0</code>, positions the
file to the end (as if by calling <code class="sh_cpp">std::fseek(file, 0, SEEK_END))</code>.<sup class="footnote"><a href="#fn336">336</a></sup></p>

<p><a class="anchor" id="p4" href="#p4">4</a>If the repositioning operation fails, calls <code class="sh_cpp">close()</code> and returns a null pointer to indicate
failure.</p>

<p><a class="anchor" id="p5" href="#p5">5</a><em>Returns:</em> <code class="sh_cpp">this</code> if successful, a null pointer otherwise.</p>

<table id="t132" class="bordered hruled padded">
<caption>Table 132 — File open modes</caption>
<thead>
<tr>
<th colspan="5">
<code class="sh_cpp">ios_base</code> flag combination</th>
<th rowspan="2">
<code class="sh_cpp">stdio</code> equivalent</th>
</tr>
<tr>
<th><code class="sh_cpp">binary</code></th>
<th><code class="sh_cpp">in</code></th>
<th><code class="sh_cpp">out</code></th>
<th><code class="sh_cpp">trunc</code></th>
<th><code class="sh_cpp">app</code></th>
</tr>
</thead>
<tbody>
<tr>
<td> </td>
<td> </td>
<td>+</td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"w"</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td>+</td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a"</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a"</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td>+</td>
<td>+</td>
<td> </td>
<td><code class="sh_cpp">"w"</code></td>
</tr>
<tr>
<td> </td>
<td>+</td>
<td> </td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"r"</code></td>
</tr>
<tr>
<td> </td>
<td>+</td>
<td>+</td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"r+"</code></td>
</tr>
<tr>
<td> </td>
<td>+</td>
<td>+</td>
<td>+</td>
<td> </td>
<td><code class="sh_cpp">"w+"</code></td>
</tr>
<tr>
<td> </td>
<td>+</td>
<td>+</td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a+"</code></td>
</tr>
<tr>
<td> </td>
<td>+</td>
<td> </td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a+"</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td>+</td>
<td> </td>
<td>+</td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"wb"</code></td>
</tr>
<tr>
<td>+</td>
<td> </td>
<td>+</td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"ab"</code></td>
</tr>
<tr>
<td>+</td>
<td> </td>
<td> </td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"ab"</code></td>
</tr>
<tr>
<td>+</td>
<td> </td>
<td>+</td>
<td>+</td>
<td> </td>
<td><code class="sh_cpp">"wb"</code></td>
</tr>
<tr>
<td>+</td>
<td>+</td>
<td> </td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"rb"</code></td>
</tr>
<tr>
<td>+</td>
<td>+</td>
<td>+</td>
<td> </td>
<td> </td>
<td><code class="sh_cpp">"r+b"</code></td>
</tr>
<tr>
<td>+</td>
<td>+</td>
<td>+</td>
<td>+</td>
<td> </td>
<td><code class="sh_cpp">"w+b"</code></td>
</tr>
<tr>
<td>+</td>
<td>+</td>
<td>+</td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a+b"</code></td>
</tr>
<tr>
<td>+</td>
<td>+</td>
<td> </td>
<td> </td>
<td>+</td>
<td><code class="sh_cpp">"a+b"</code></td>
</tr>
</tbody>
</table>

<h5><code class="sh_cpp">basic_filebuf&lt;charT, traits&gt;* <dfn>open</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="open"></object>(const string&amp; s,
    ios_base::openmode mode);</code></h5>

<p><em>Returns:</em> <code class="sh_cpp">open(s.c_str(), mode)</code>.</p>

<h5><code class="sh_cpp">basic_filebuf&lt;charT, traits&gt;* <dfn>close</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="close"></object>();</code></h5>

<p><a class="anchor" id="p6" href="#p6">6</a><em>Effects:</em> If <code class="sh_cpp">is_open() == false</code>, returns a null pointer. If a put area exists, calls
<code class="sh_cpp">overflow(traits::eof())</code> to flush characters. If the last virtual member function called on
<code class="sh_cpp">*this</code> (between <code class="sh_cpp">underflow</code>, <code class="sh_cpp">overflow</code>, <code class="sh_cpp">seekoff</code>, and
<code class="sh_cpp">seekpos</code>) was <code class="sh_cpp">overflow</code> then calls <code class="sh_cpp">a_codecvt.unshift</code> (possibly several times) to
determine a termination sequence, inserts those characters and calls <code class="sh_cpp">overflow(traits::eof())</code> again.
Finally, regardless of whether any of the preceding calls fails or throws an exception, the function closes the file (as
if by calling <code class="sh_cpp">std::fclose(file)</code>).<sup class="footnote"><a href="#fn337">337</a></sup> If any of the calls made by the function, including
<code class="sh_cpp">std::fclose</code>, fails, <code class="sh_cpp">close</code> fails by returning a null pointer. If one of these calls throws an
exception, the exception is caught and rethrown after closing the file.</p>

<p><a class="anchor" id="p7" href="#p7">7</a><em>Returns:</em> <code class="sh_cpp">this</code> on success, a null pointer otherwise.</p>

<p><a class="anchor" id="p8" href="#p8">8</a><em>Postconditions:</em> <code class="sh_cpp">is_open() == false</code>.</p>




<div>
<p class="footnote" id="fn336">336) The macro <code class="sh_cpp">SEEK_END</code> is defined, and the function signatures <code class="sh_cpp">fopen(const char*, const
char*)</code> and <code class="sh_cpp">fseek(FILE*, long, int)</code> are declared, in <code class="header">&lt;cstdio&gt;</code>
(<a title="c.files" href="c.files.html">27.9.2</a>).</p>
<p class="footnote" id="fn337">337) The function signature <code class="sh_cpp">fclose(FILE*)</code> is declared in <code class="header">&lt;cstdio&gt;</code>
(<a title="c.files" href="c.files.html">27.9.2</a>).</p>
</div>
</body>
</html>



