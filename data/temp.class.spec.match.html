<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script type="text/javascript" src="../sh_main.js"></script>
<script type="text/javascript" src="../sh_cpp.js"></script>
<!--[IF IE]>
	<script type="text/javascript" src="ierange.js"></script>
<![ENDIF]-->
<script type="text/javascript" src="../masha.min.js"></script>
<script type="text/javascript" src="../all_pack.js"></script>
<link rel="stylesheet" type="text/css" href="../css/masha.css">
<link rel="stylesheet" type="text/css" href="../sh_print.css">
<link rel="stylesheet" type="text/css" href="../toc.css">
<link rel="stylesheet" type="text/css" href="../styles.css">
<script type="text/javascript" src="../page.js"></script>

<title>Matching of class template partial specializations</title>
</head>
<body>
<h4>
<dfn class="label">[temp.class.spec.match]</dfn><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e"><param name="Keyword" value="[temp.class.spec.match]"></object>14.5.5.1 Matching of class template partial specializations </h4>

<p><a class="anchor" id="p1" href="#p1">1</a>When a class template is used in a context that requires an instantiation of the class, it is necessary to
determine whether the instantiation is to be generated using the primary template or one of the partial specializations.
This is done by matching the template arguments of the class template specialization with the template argument lists of
the partial specializations.</p>

<ul>
<li>If exactly one matching specialization is found, the instantiation is generated from that specialization.</li>
<li>If more than one matching specialization is found, the partial order rules (<a title="temp.class.order" href="temp.class.order.html">14.5.5.2</a>) are used to
	determine whether one of the specializations is more specialized than the others. If none of the specializations is
	more specialized than all of the other matching specializations, then the use of the class template is ambiguous and
	the program is ill-formed.</li>
<li>If no matches are found, the instantiation is generated from the primary template.</li>
</ul>

<p><a class="anchor" id="p2" href="#p2">2</a>A partial specialization matches a given actual template argument list if the template arguments of the partial
specialization can be deduced from the actual template argument list (<a title="temp.deduct" href="temp.deduct.html">14.8.2</a>).</p>

<div class="example">
<p>[ <em>Example:</em> </p>
<pre><code class="sh_cpp">A&lt;int, int, 1&gt;   a1;    // uses #1
A&lt;int, int*, 1&gt;  a2;    // uses #2, T is int, I is 1
A&lt;int, char*, 5&gt; a3;    // uses #4, T is char
A&lt;int, char*, 1&gt; a4;    // uses #5, T1 is int, T2 is char, I is 1
A&lt;int*, int*, 2&gt; a5;    // ambiguous: matches #3 and #5</code></pre>
<p> — <em>end example</em> ]</p>
</div>

<p><a class="anchor" id="p3" href="#p3">3</a>A non-type template argument can also be deduced from the value of an actual template argument of a non-type
parameter of the primary template. <span class="example">[ <em>Example:</em> the declaration of <code class="sh_cpp">a2</code> above. — <em>end example</em> ]</span></p>

<p><a class="anchor" id="p4" href="#p4">4</a>In a type name that refers to a class template specialization, (e.g., <code class="sh_cpp">A&lt;int, int, 1&gt;</code>) the
argument list shall match the template parameter list of the primary template. The template arguments of a
specialization are deduced from the arguments of the primary template.</p>
</body>
</html>



